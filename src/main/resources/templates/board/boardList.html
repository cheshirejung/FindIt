<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판 목록 조회 페이지</title>
    <link rel="stylesheet" href="/css/boardList.css">
    <link rel="stylesheet" type="text/css" href="/css/header.css">
</head>
<body>
<header th:replace="~{/fragment/header :: headerFragment}"></header>

<div class="content">
    <!-- 반복문으로 DB 내 게시판 섹션 출력 -->
    <div th:each="board : ${boards}" class="board-item">
        <a th:href="'/post?boardId=' + ${board.boardId}" class="board-link">
            <div class="lab-section">
                <img th:src="${board.getImageUrl()}" alt="board-image" class="board-image">
                <div class="lab-title" th:text="${board.title}"></div>
            </div>
        </a>
        <!-- th:if를 사용하여 role이 admin인 사용자에게만 수정 버튼이 보이게 설정 -->
        <button class="edit-button" th:if="${userRole == 'ADMIN'}" th:onclick="|location.href='/board/update/' + ${board.boardId}|">수정</button>


    </div>

    <!-- 관리자 섹션 -->
    <div class="admin-section">
        <button class="admin-button" onclick="location.href='/board/create'">admin</button>
    </div>
    <!-- 페이지 네비게이션 -->
    <div class="pagination">
        <!-- 이전 페이지 버튼 -->
        <a th:href="@{/board(page=${boards.number})}" th:if="${boards.hasPrevious()}" class="page-link">&lt;</a>

        <!-- 페이지 번호 -->
        <span th:each="pageNum : ${#numbers.sequence(1, boards.totalPages)}">
        <a th:href="@{/board(page=${pageNum})}"
           th:text="${pageNum}"
           th:classappend="${pageNum - 1 == boards.number} ? 'current-page' : ''"></a>
    </span>

        <!-- 다음 페이지 버튼 -->
        <a th:href="@{/board(page=${boards.number + 1})}" th:if="${boards.hasNext()}" class="page-link">&gt;</a>
    </div>
</div>
</body>
</html>
